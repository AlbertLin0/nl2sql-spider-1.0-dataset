
CREATE TABLE "exams" (
  "exam_id" INT GENERATED BY DEFAULT AS IDENTITY,
  "subject_code" char(15)  NOT NULL,
  "exam_date" TIMESTAMP DEFAULT NULL,
  "exam_name" varchar(255)  DEFAULT NULL,
  PRIMARY KEY ("exam_id")
) ;


CREATE TABLE "questions" (
  "question_id" INT GENERATED BY DEFAULT AS IDENTITY,
  "type_of_question_code" varchar(15)  NOT NULL,
  "question_text" varchar(255)  DEFAULT NULL,
  PRIMARY KEY ("question_id")
) ;


CREATE TABLE "questions_in_exams" (
  "exam_id" int NOT NULL,
  "question_id" int NOT NULL,
  PRIMARY KEY ("exam_id","question_id"),
  CONSTRAINT "questions_in_exams_fk_0_0" FOREIGN KEY ("exam_id") REFERENCES "exams" ("exam_id"),
  CONSTRAINT "questions_in_exams_fk_1_0" FOREIGN KEY ("question_id") REFERENCES "questions" ("question_id")
);


CREATE TABLE "valid_answers" (
  "valid_answer_id" INT GENERATED BY DEFAULT AS IDENTITY,
  "question_id" int NOT NULL,
  "valid_answer_text" varchar(255)  DEFAULT NULL,
  PRIMARY KEY ("valid_answer_id"),
  CONSTRAINT "valid_answers_fk_0_0" FOREIGN KEY ("question_id") REFERENCES "questions" ("question_id")
) ;


CREATE TABLE "student_assessments" (
  "student_answer_id" varchar(100)  NOT NULL,
  "valid_answer_id" int NOT NULL,
  "student_answer_text" varchar(255)  DEFAULT NULL,
  "satisfactory_yn" char(1)  DEFAULT NULL,
  "assessment" varchar(40)  DEFAULT NULL,
  PRIMARY KEY ("student_answer_id"),
  CONSTRAINT "student_assessments_fk_0_0" FOREIGN KEY ("valid_answer_id") REFERENCES "valid_answers" ("valid_answer_id")
);


CREATE TABLE "students" (
  "student_id" INT GENERATED BY DEFAULT AS IDENTITY,
  "first_name" varchar(255)  DEFAULT NULL,
  "middle_name" varchar(255)  DEFAULT NULL,
  "last_name" varchar(255)  DEFAULT NULL,
  "gender_mfu" char(1)  DEFAULT NULL,
  "student_address" varchar(255)  DEFAULT NULL,
  "email_adress" varchar(255)  DEFAULT NULL,
  "cell_mobile_phone" varchar(255)  DEFAULT NULL,
  "home_phone" varchar(255)  DEFAULT NULL,
  PRIMARY KEY ("student_id")
) ;



CREATE TABLE "student_answers" (
  "student_answer_id" INT GENERATED BY DEFAULT AS IDENTITY,
  "exam_id" int NOT NULL,
  "question_id" int NOT NULL,
  "student_id" int NOT NULL,
  "date_of_answer" TIMESTAMP DEFAULT NULL,
  "comments" varchar(255)  DEFAULT NULL,
  "satisfactory_yn" varchar(1)  DEFAULT NULL,
  "student_answer_text" varchar(255)  DEFAULT NULL,
  PRIMARY KEY ("student_answer_id"),
  CONSTRAINT "student_answers_fk_0_0" FOREIGN KEY ("exam_id", "question_id") REFERENCES "questions_in_exams" ("exam_id", "question_id"),
  CONSTRAINT "student_answers_fk_1_0" FOREIGN KEY ("student_id") REFERENCES "students" ("student_id")
) ;

